<!DOCTYPE html>
<!-- saved from url=(0489)https://kashio.auth0.com/login?state=hKFo2SBYUlpDOWZpbnhYRlJzRHNwdVBZamxQWmgzZ1IzalJiYaFupWxvZ2luo3RpZNkgZTNia0tXdmRqZXFleXIzbkR5el9IOXdvTWhfdTdjalajY2lk2SBHTFRMamc3MHF2ZUc3WTZXRDJmUEFlYmY3M2xBaVdnUw&client=GLTLjg70qveG7Y6WD2fPAebf73lAiWgS&protocol=oauth2&prompt=login&response_type=token%20id_token&redirect_uri=https%3A%2F%2Fns0-kcms.kashio.com.pe%2Fcallback&scope=openid%20profile&nonce=cxqI2Tbru5C_47-UV6Dac445UAvYwrCE&auth0Client=eyJuYW1lIjoiYXV0aDAuanMiLCJ2ZXJzaW9uIjoiOS4xNi4wIn0%3D -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Required meta tags -->
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="KashIO Customer Management System - Login">
  <meta name="author" content="KashIO INC">
  <link rel="shortcut icon" href="./kassio/kashio_ico.ico">
  <title>Kashio Customer Management System - Login</title>

  <!-- Common CSS -->
  <link rel="stylesheet" href="./kassio/bootstrap.min.css">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@300;400;500;600;700&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Inter&display=swap');

  :root {
    --radius-md: 8px;

    --button-primary-border: #0666EB;
    --button-primary-bg: #0666EB;
    --button-primary-fg: #FFF;
    --button-tertiary-color-fg: #0552BC;

    --border-primary: #D0D5DD;

    --spacing-xs: 4px;
    --spacing-sm: 0.375rem;
    --spacing-md: 0.5rem;
    --spacing-lg: 0.75rem;
    --spacing-xl: 1rem;
    --spacing-2xl: 1.25rem;
    --spacing-3xl: 1.5rem;
    --spacing-4xl: 2rem;
    --spacing-5xl: 3rem;
    --spacing-7xl: 4rem;
    --spacing-8xl: 5rem;
    --spacing-9xl: 6rem;

    --color-text-white: #FFF;
    --color-text-placeholder: #667085;
    --color-text-error-primary-600: #D92D20;
    --text-primary-900: #101828;
    --text-tertiary-600: #475467;
    --text-secondary-700: #344054;

    --border-error: #FDA29B;

    --background-bg-secondary: #F9FAFB;
    --background-bg-primary: #FFF;

    --container-padding-mobile: 1rem;

    --bg-image: url(./kassio/img-kcms.webp);
    --bg-pattern: url(./kassio/Background+pattern.svg);
    --font-family: 'Red Hat Display', sans-serif;

  }

  html,
  body {
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
  }

  body {
    font-family: var(--font-family);
    overflow: hidden;
    height: 100dvh;
  }

  label,
  p,
  a,
  span,
  h1,
  h2 {
    margin: 0;
  }

  a {
    text-decoration: none;
  }

  a:hover {
    text-decoration: none;
  }

  button:focus {
    outline: 0;
  }

  /* SCROLL  */

  @supports selector(-webkit-scrollbar) {
    .v2-login-general-container::-webkit-scrollbar {
      transition: all 5s ease;
      width: 10px;
    }

    .v2-login-general-container::-webkit-scrollbar-track {
      background: transparent;
      padding: 2px;
    }

    .v2-login-general-container::-webkit-scrollbar-thumb {
      background: #AEB8C8;
      padding: 2px;
      border-radius: 20px;
    }

    .v2-login-general-container::-webkit-scrollbar-thumb:hover {
      background: #9aa4b4;
    }
  }

  /* FIRST SECTION  */

  .environment-container {
    display: none;
    padding: var(--spacing-xs, 4px) var(--spacing-lg, 12px);
    align-items: center;
    gap: var(--spacing-lg, 12px);
    border-radius: var(--radius-lg, 10px);
    border: 1px solid var(--Colors-Border-border-primary, #D0D5DD);
    background: var(--Colors-Background-bg-primary, #FFF);
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
  }

  .environment-container span {
    color: var(--colors-text-text-secondary-700, #344054);

    /* Text sm/Medium */
    font-family: var(--font-family);
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 20px;
    /* 142.857% */
  }

  .outer-circle {
    width: 17px;
    height: 17px;
    background-color: #DCFAE6;
    border-radius: 50%;
    position: relative;
  }

  .outer-circle::before {
    content: '';
    width: 8.5px;
    background-color: #17B26A;
    border-radius: 50%;
    position: absolute;
    top: 25%;
    left: 25%;
    aspect-ratio: 1 / 1;
  }

  .v2-login-general-container__submit {
    width: 100%;
    border-radius: var(--radius-md, 8px);
    border: 1px solid var(--button-primary-border, #0666EB);
    background: var(--button-primary-bg, #0666EB);
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
    padding: 0.75rem 1.125rem;
    color: var(--button-primary-fg, #FFF);
    font-size: 1rem;
    font-weight: 700;
    line-height: 150%;
    cursor: pointer;
  }

  .v2-login-general-container__input-container {
    position: relative;
    width: 100%;
  }

  .v2-login-general-container__input-container>img {
    position: absolute;
    top: 50%;
    right: 16px;
    opacity: 0;
    transform: translateY(-50%);
    transition: opacity 0.15s ease;
  }

  .v2-login-general-container__input-container>input {
    padding-right: 38px;
  }

  .v2-login-general-container__input {
    width: 100%;
    height: 2.75rem;
    padding: 0.625rem 0.875rem;
    border-radius: var(--radius-md, 0.5rem);
    border: 1px solid var(--border-primary, #D0D5DD);
    background: var(--background-bg-primary, #FFF);
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
    outline: none;
  }

  .v2-login-general-container__input::placeholder {
    color: var(--color-text-placeholder, #667085);
  }

  .v2-login-general-container__input:focus {
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05), 0px 0px 0px 4px rgba(57, 134, 239, 0.24);
  }

  .v2-login-general-container__input.input-valid {
    border-radius: var(--radius-md, 8px);
    border: 1px solid var(--border-primary, #D0D5DD);
    background: var(--background-bg-primary, #FFF);
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
  }

  .v2-login-general-container__input.input-valid:focus {
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05), 0px 0px 0px 4px rgba(57, 134, 239, 0.24);
  }

  .v2-login-general-container__input.input-invalid {
    border-radius: var(--radius-md, 8px);
    border: 1px solid var(--border-error, #FDA29B);
    background: var(--background-bg-primary, #FFF);
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
  }

  .v2-login-general-container__input.input-invalid:focus {
    box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05), 0px 0px 0px 4px rgba(240, 68, 56, 0.24);
  }

  .v2-login-general-container__error-message {
    color: var(--color-text-error-primary-600, #D92D20);
    font-size: 0.875rem;
    font-weight: 400;
    line-height: 142.857%;
  }

  .v2-login-general-container__forgot-password {
    color: var(--button-tertiary-color-fg, #0552BC);
    font-size: 0.875rem;
    font-weight: 700;
    line-height: 142.857%;
  }

  .v2-login-general-container__form-content {
    display: flex;
    width: 100%;
    max-width: 360px;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm, 6px);
  }

  .v2-login-general-container__form {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-3xl, 1.5rem);
    align-self: stretch;
  }

  .v2-login-general-container__form-groups {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-2xl, 1.25rem);
    align-self: stretch;
  }

  .v2-login-general-container__form-group {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-sm, 0.375rem);
    align-self: stretch;
  }

  .v2-login-general-container__label {
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 142.857%;

    color: #102d5bcc;
  }

  .v2-login-general-container__header {
    display: flex;
    flex-direction: column;
    align-items: center;
    align-self: stretch;
  }

  .v2-login-general-container__greeting {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm, 6px);
    align-self: stretch;
  }

  .v2-login-general-container__heading {
    color: #102D5B;
    text-align: center;
    font-size: 24px;
    font-weight: 700;
    line-height: 125%;
    letter-spacing: -0.03rem;
  }

  .v2-login-general-container__greeting .v2-login-general-container__subheading {
    color: #102d5bcc;
    text-align: center;
    font-size: 16px;
    font-weight: 400;
    line-height: 150%;
  }

  .v2-login-general-container {
    height: 100%;
    width: 100%;
    overflow-y: auto;
    padding: var(--spacing-4xl, 2rem) var(--container-padding-mobile, 1rem);
    display: grid;
    grid-template-columns: 1fr 0fr;
    grid-template-rows: 1fr;
    gap: 0;
  }

  /* SECOND SECTION  */

  .v2-login-general-container__image-presentation {
    display: none;
    position: relative;
    min-width: var(--width-lg, 640px);
    justify-content: center;
    align-items: center;
    border-radius: 18px 0px 0px 18px;
    background: linear-gradient(0deg, rgba(255, 255, 255, 0.20) 0%, rgba(255, 255, 255, 0.20) 100%), linear-gradient(90deg, #EFEEFB 0.21%, #E3F5FF 105.84%);
  }

  .v2-login-general-container__content {
    margin-bottom: auto;
    height: 100%;
    width: 100%;
    flex: 1.5;
  }

  .v2-login-general-container__logo {
    display: flex;
  }

  .v2-login-general-container__logo {
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-xl, 16px);
  }

  .v2-login-general-container__footer-desktop {
    text-align: center;
  }

  .v2-login-general-container__footer-desktop p {
    color: var(--text-tertiary-600, #475467);
    font-size: 0.875rem;
    font-weight: 400;
    line-height: 142.857%
  }

  .v2-login-general-container__content-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-4xl, 2rem);
  }

  .v2-login-general-container__image-content {
    min-height: 80%;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 32px;
  }

  .v2-login-general-container__image-text {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-xl, 16px);
    align-self: stretch;
  }

  .v2-login-general-container__image-heading {
    text-align: center;
    font-size: 3.4375rem;
    font-weight: 600;
    line-height: 125%;
    letter-spacing: -1.1px;
    color: #102D5B;
  }

  .v2-login-general-container__image-heading span {
    background: linear-gradient(120deg, #4DBFFF 26.34%, #0D80FF 65.43%, #0666EB 82.16%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .star-icon {
    width: 29.809px;
    height: 29.809px;
    margin: auto;
    vertical-align: top;

  }

  .v2-login-general-container__image-subheading {
    color: rgba(16, 45, 91, 0.90);
    text-align: center;
    font-size: 1.25rem;
    font-weight: 500;
    line-height: 150%;
    letter-spacing: -0.4px;
  }

  .v2-login-general-container__image {
    max-width: 90%;
    aspect-ratio: 1/1;
    flex: 3 3 50%;
    background-image: var(--bg-image);
    background-position: center 35%;
    background-size: cover;
    background-repeat: no-repeat;
  }

  /* ERROR MESSAGE  */

  #error-message-container {
    background: #FF5655;
    display: none;
    padding: var(--spacing-lg, 12px) var(--spacing-md, 8px);
    justify-content: center;
    align-items: center;
    gap: var(--spacing-md, 8px);
    align-self: stretch;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  #error-message-container span {
    color: #FFF;
    text-align: center;
    font-size: 14px;
    font-weight: 500;
    line-height: 150%;
  }

  #blocked-account-message-container {
    margin-right: auto;
    width: 100%;
    display: none;
  }

  .v2-login-general-container__status-code-error-message {
    display: flex;
    position: relative;
    padding: var(--spacing-2xl, 20px) var(--spacing-xl, 16px);
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-xl, 16px);
    align-self: stretch;
    border-radius: var(--radius-md, 8px);
    background: var(--background-bg-secondary, #F9FAFB);
  }

  .v2-login-general-container__status-code-error-content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-xs, 4px);
    align-self: stretch;
  }

  .v2-login-general-container__status-code-error-title {
    color: var(--text-primary-900, #101828);
    font-size: 14px;
    font-weight: 700;
    line-height: 20px;
  }

  .v2-login-general-container__status-code-error-description {
    color: var(--text-tertiary-600, #475467);
    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
  }

  .general-error-description {
    margin-right: 12px;
  }

  .v2-login-general-container__status-code-error-timestamp {
    color: var(--text-tertiary-600, #475467);
    font-size: 14px;
    font-weight: 700;
    line-height: 20px;
  }

  .v2-login-general-container__status-code-error-link {
    border: none;
    background-color: transparent;
    color: var(--button-tertiary-color-fg, #0552BC);
    font-size: 14px;
    font-weight: 700;
    line-height: 20px;
  }

  .v2-login-general-container__status-code-error-delete-button {
    border: none;
    background-color: transparent;
    position: absolute;
    right: -1%;
    top: 2px;
    padding: var(--spacing-md, 8px);
    cursor: pointer;
  }

  .v2-login-general-container__image-arrow-icon {
    display: none;
  }

  @media (min-width: 481px) and (max-width: 767px) {
    .v2-login-general-container {
      padding: var(--spacing-7xl, 64px) var(--container-padding-mobile, 16px);
    }

    .v2-login-general-container__greeting {
      gap: var(--spacing-md, 8px);
    }

    .v2-login-general-container__form-content {
      gap: var(--spacing-4xl, 32px);
    }
  }

  @media (min-width: 768px) and (max-width: 1024px) {
    .v2-login-general-container {
      padding: var(--spacing-8xl, 80px) var(--container-padding-mobile, 16px);
    }

    .v2-login-general-container__greeting {
      gap: var(--spacing-md, 8px);
    }

    .v2-login-general-container__heading {
      font-size: 1.875rem;
    }

    .v2-login-general-container__form-content {
      gap: var(--spacing-4xl, 32px);
    }
  }

  @media (min-width: 1025px) and (max-width: 1366px) {

    .v2-login-general-container {
      padding: 0;
      grid-template-columns: 2.5fr 3fr;
    }

    .v2-login-general-container__content-wrapper {
      padding: var(--spacing-8xl, 80px) var(--container-padding-mobile, 16px);
      justify-content: space-around;
    }

    .v2-login-general-container__form-content {
      gap: var(--spacing-4xl, 32px);
    }

    .v2-login-general-container__greeting {
      gap: var(--spacing-md, 8px);
    }

    .v2-login-general-container__image-presentation {
      display: flex;
      align-items: center;
      min-width: var(--width-lg, 640px);
      padding: var(--spacing-4xl, 32px) 0px 0px 0px;
    }

    .v2-login-general-container__image-text {
      gap: var(--spacing-lg, 12px);
    }

    .v2-login-general-container__image-heading {
      font-size: 38px;
      font-weight: 500;
      line-height: 125%;
      letter-spacing: -0.76px;
    }

    .v2-login-general-container__image-subheading {
      font-size: 16px;
      letter-spacing: -0.32px;
    }

    .v2-login-general-container__image {
      flex: 1 1 600px;
    }
  }


  @media (min-width: 1367px) {
    .v2-login-general-container {
      padding: 0;
      grid-template-columns: 2.5fr 3fr;
    }

    .v2-login-general-container__content-wrapper {
      padding: var(--spacing-9xl, 96px) var(--container-padding-mobile, 16px);
      justify-content: center;
    }

    .v2-login-general-container__form-content {
      gap: var(--spacing-4xl, 32px);
    }

    .v2-login-general-container__greeting {
      gap: var(--spacing-md, 8px);
    }

    .v2-login-general-container__image-presentation {
      display: flex;
      justify-content: center;
      align-items: center;
      min-width: var(--width-lg, 640px);
      padding: var(--spacing-7xl, 80px) 0px 0px 0px;
    }

    .v2-login-general-container__image-text {
      gap: var(--spacing-lg, 12px);
    }

    .v2-login-general-container__image-heading {
      font-size: 46px;
      font-weight: 500;
      line-height: 125%;
      letter-spacing: -0.92px;
    }

    .v2-login-general-container__image-subheading {
      font-size: 16px;
      letter-spacing: -0.32px;
    }

    .v2-login-general-container__image {
      /* flex: 1 1 600px; */
      flex: 1 1 505.172px;
    }

    .v2-login-general-container__image-arrow-icon {
      display: block;
      position: absolute;
      bottom: 8%;
      left: -64px;
      transform: rotate(1deg);
    }
  }
</style></head>




<body class="scroll-container">
  <div id="error-message-container"></div>

  <div class="v2-login-general-container">
    <section class="v2-login-general-container__content">
      <div class="v2-login-general-container__content-wrapper">
        <header class="v2-login-general-container__header">
          <div class="v2-login-general-container__logo">
            <img src="./kassio/Logo-Kashio.svg" alt="Logo Kashio">
            <div class="environment-container" style="display: flex;">
              <div class="outer-circle"></div>
              <span>Production</span>
            </div>
          </div>
        </header>

        <div class="v2-login-general-container__form-content">
          <div class="v2-login-general-container__greeting">
            <h1 class="v2-login-general-container__heading">Bienvenido de nuevo</h1>
            <p class="v2-login-general-container__subheading">Por favor ingresa tus datos</p>
          </div>

          <form id="login-form" class="v2-login-general-container__form">
            <div id="blocked-account-message-container"></div>

            <div class="v2-login-general-container__form-groups">
              <div class="v2-login-general-container__form-group">
                <label for="email-input" class="v2-login-general-container__label">Email</label>
                <input type="email" name="email" placeholder="Ingresa tu correo" id="email-input" class="v2-login-general-container__input" required="">
                <p id="email-error-message" class="v2-login-general-container__error-message" style="display: none;"></p>
              </div>

              <div class="v2-login-general-container__form-group">
                <label for="password-input" class="v2-login-general-container__label">Contraseña</label>

                <div id="input-container" class="v2-login-general-container__input-container">
                  <input type="password" name="password" placeholder="Ingresa tu contraseña" id="password-input" class="v2-login-general-container__input" required="">
                </div>

                <p id="password-error-message" class="v2-login-general-container__error-message"></p>
              </div>
            </div>

            <a href="https://ns0-kcms.kashio.com.pe/forgot_password?version=v2" id="forgot-password-path" class="v2-login-general-container__forgot-password">
              Olvidé contraseña
            </a>

            <button type="submit" id="login-submit-button" class="v2-login-general-container__submit">Inicia
              sesión</button>
          </form>
        </div>

        <footer class="v2-login-general-container__footer-desktop">© Kashio versión 2026</footer>
      </div>
    </section>

    <section class="v2-login-general-container__image-presentation">
      <div class="v2-login-general-container__image-content">
        <div class="v2-login-general-container__image-text">
          <h2 class="v2-login-general-container__image-heading">Somos expertos en <br> <span>Pagos y Cobros
              <img src="./kassio/Star.svg" alt="Star" class="star-icon"></span></h2>
          <p class="v2-login-general-container__image-subheading">Empieza tu nueva experiencia en Kashio.</p>
        </div>

        <div class="v2-login-general-container__image"></div>
      </div>
      <div class="v2-login-general-container__image-arrow-icon">
        <img src="./kassio/Hand-drawn+arrow.svg" alt="Arrow icon">
      </div>
    </section>
  </div>

  <!--[if IE 8]>
  <script src="./kassio/ie8.js"></script>
  <![endif]-->

  <!--[if lte IE 9]>
  <script src="./kassio/base64.min.js"></script>
  <script src="./kassio/es5-shim.min.js"></script>
  <![endif]-->

  <script src="./kassio/auth0.min.js.descarga"></script>
  <script src="./kassio/object-assign.min.js.descarga"></script>
  <script>
    const emailInput = document.getElementById('email-input');
    const emailError = document.getElementById('email-error-message');
    const submitButton = document.getElementById('login-submit-button');

    const emailErrorMessage = {
      invalid: 'Correo electrónico es inválido',
      touched: 'Correo electrónico es requerido'
    }

    let isEmailInputTouched = false;
    let timerInterval;
    let endTime;

    const errorTimestampMessage = (errorData) => {
      const { errorTitle, errorDescription, errorLink, errorLinkText } = errorData;
      return `
        <div class="v2-login-general-container__status-code-error-content">
            <p class="v2-login-general-container__status-code-error-title">${errorTitle}</p>
            <p class="v2-login-general-container__status-code-error-description">${errorDescription}</p>
            <p id="status-code-error-timestamp" class="v2-login-general-container__status-code-error-timestamp"></p>
        </div>
        <a class="v2-login-general-container__status-code-error-link" href="mailto:${errorLink}">${errorLinkText}</a>
        <button class="v2-login-general-container__status-code-error-delete-button" onclick="removeBlockedAccountErrorMessage()">
        <span>
          <img src="./kassio/Button+close+X.svg" alt="">
        </span>
        </button>
    `;
    };

    const errorMessage = (errorData) => {
      const { errorDescription } = errorData;

      return `
        <div class="v2-login-general-container__status-code-error-content">
          <p class="v2-login-general-container__status-code-error-description general-error-description">${errorDescription}</p>
        </div>
        <button class="v2-login-general-container__status-code-error-delete-button" onclick="removeBlockedAccountErrorMessage()">
        <span>
          <img src="./kassio/Button+close+X.svg" alt="">
        </span>
        </button>
      `;
    }

    const errorMessages = {
      400: {
        errorDescription: 'No pudimos encontrar una cuenta que coincida con el nombre de usuario y la contraseña que ingresó. Por favor verifique su nombre de usuario y contraseña e inténtelo nuevamente.'
      },
      401: {
        errorDescription: 'No pudimos encontrar una cuenta que coincida con el nombre de usuario y la contraseña que ingresó. Por favor verifique su nombre de usuario y contraseña e inténtelo nuevamente.'
      },
      429: {
        errorTitle: 'Cuenta bloqueada',
        errorDescription: 'Por motivos de seguridad. Por favor, contáctanos para resolver esta situación.',
        errorLink: 'soporte@kashio.net?Subject=Desbloqueo%20de%20cuenta',
        errorLinkText: 'Desbloquear'
      },
      other: {
        errorDescription: 'Error al intentar ingresar a la cuenta.'
      }
    };

    const domainToEnvironment = {
      'http://localhost:4200': 'Development',
      'http://d1-kcms.kashio-dev.net.s3-website-us-east-1.amazonaws.com': 'Development',
      'https://d2-kcms.kashio-dev.net': 'Development',
      'https://d3-kcms.kashio-dev.net': 'Development',
      'https://q1-kcms.kashio-dev.net': 'QA',
      'https://q2-kcms.kashio-dev.net': 'QA',
      'https://q3-kcms.kashio-dev.net': 'QA',
      'https://q4-kcms.kashio-dev.net': 'Stage',
      'https://cert-kpms.kashio.net': 'Certification',
      'https://cs0-kcms.kashio.com.pe': 'Certification',
      'https://ns0-kcms.kashio.com.pe': 'Production',
      'https://pa01-kcms.kashio.com.pe': 'Production',
      'https://ns0-kcms.kashio.com.pe': 'Production',
      'https://pa01-kcms.kashio.com.pe': 'Production',
      'https://ns4-kcms.kashio.com.pe': 'Production',
      'https://p5-kcms.kashio.net': 'Production',
      'https://p4-kcms.kashio.net': 'Production',
      'https://p3-kcms.kashio.net': 'Production'
    };

    // --- 

    window.addEventListener('load', function () {
      console.log('Kashio Login V2');
      const config = JSON.parse(
        decodeURIComponent(escape(window.atob('eyJpY29uIjoiaHR0cHM6Ly93d3cua2FzaGlvLm5ldC9pbWcvTG9nb0thc2hpb0F1dGgwLnBuZyIsImFzc2V0c1VybCI6IiIsImF1dGgwRG9tYWluIjoia2FzaGlvLmF1dGgwLmNvbSIsImF1dGgwVGVuYW50Ijoia2FzaGlvIiwiY2xpZW50Q29uZmlndXJhdGlvbkJhc2VVcmwiOiJodHRwczovL2thc2hpby5hdXRoMC5jb20vIiwiY2FsbGJhY2tPbkxvY2F0aW9uSGFzaCI6ZmFsc2UsImNhbGxiYWNrVVJMIjoiaHR0cHM6Ly9uczAta2Ntcy5rYXNoaW8uY29tLnBlL2NhbGxiYWNrIiwiY2RuIjoiaHR0cHM6Ly9jZG4uYXV0aDAuY29tLyIsImNsaWVudElEIjoiR0xUTGpnNzBxdmVHN1k2V0QyZlBBZWJmNzNsQWlXZ1MiLCJkaWN0Ijp7InNpZ25pbiI6eyJ0aXRsZSI6IktDTVMtTElWRSJ9fSwiZXh0cmFQYXJhbXMiOnsicHJvdG9jb2wiOiJvYXV0aDIiLCJyZXNwb25zZV90eXBlIjoidG9rZW4gaWRfdG9rZW4iLCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIiwicHJvbXB0IjoibG9naW4iLCJub25jZSI6ImN4cUkyVGJydTVDXzQ3LVVWNkRhYzQ0NVVBdll3ckNFIiwiYXV0aDBDbGllbnQiOiJleUp1WVcxbElqb2lZWFYwYURBdWFuTWlMQ0oyWlhKemFXOXVJam9pT1M0eE5pNHdJbjA9IiwiX2NzcmYiOiJ0Z29GWE53SS0xVkJNd04yajhseXY1d2J1eHdCWkR6SlBNV2MiLCJfaW50c3RhdGUiOiJkZXByZWNhdGVkIiwic3RhdGUiOiJoS0ZvMlNCWVVscERPV1pwYm5oWVJsSnpSSE53ZFZCWmFteFFXbWd6WjFJemFsSmlZYUZ1cFd4dloybHVvM1JwWk5rZ1pUTmlhMHRYZG1ScVpYRmxlWEl6YmtSNWVsOUlPWGR2VFdoZmRUZGphbGFqWTJsazJTQkhURlJNYW1jM01IRjJaVWMzV1RaWFJESm1VRUZsWW1ZM00yeEJhVmRuVXcifSwiaW50ZXJuYWxPcHRpb25zIjp7InByb3RvY29sIjoib2F1dGgyIiwicmVzcG9uc2VfdHlwZSI6InRva2VuIGlkX3Rva2VuIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSIsInByb21wdCI6ImxvZ2luIiwibm9uY2UiOiJjeHFJMlRicnU1Q180Ny1VVjZEYWM0NDVVQXZZd3JDRSIsImF1dGgwQ2xpZW50IjoiZXlKdVlXMWxJam9pWVhWMGFEQXVhbk1pTENKMlpYSnphVzl1SWpvaU9TNHhOaTR3SW4wPSIsIl9jc3JmIjoidGdvRlhOd0ktMVZCTXdOMmo4bHl2NXdidXh3QlpEekpQTVdjIiwiX2ludHN0YXRlIjoiZGVwcmVjYXRlZCIsInN0YXRlIjoiaEtGbzJTQllVbHBET1dacGJuaFlSbEp6UkhOd2RWQlphbXhRV21neloxSXphbEppWWFGdXBXeHZaMmx1bzNScFpOa2daVE5pYTB0WGRtUnFaWEZsZVhJemJrUjVlbDlJT1hkdlRXaGZkVGRqYWxhalkybGsyU0JIVEZSTWFtYzNNSEYyWlVjM1dUWlhSREptVUVGbFltWTNNMnhCYVZkblV3In0sIndpZGdldFVybCI6Imh0dHBzOi8vY2RuLmF1dGgwLmNvbS93Mi9hdXRoMC13aWRnZXQtNS4yLm1pbi5qcyIsImlzVGhpcmRQYXJ0eUNsaWVudCI6ZmFsc2UsImF1dGhvcml6YXRpb25TZXJ2ZXIiOnsidXJsIjoiaHR0cHM6Ly9rYXNoaW8uYXV0aDAuY29tIiwiaXNzdWVyIjoiaHR0cHM6Ly9rYXNoaW8uYXV0aDAuY29tLyJ9LCJjb2xvcnMiOnt9fQ==')))
      );

      const params = Object.assign({
        /* additional configuration needed for use of custom domains
        overrides: {
          __tenant: config.auth0Tenant,
          __token_issuer: 'YOUR_CUSTOM_DOMAIN'
        }, */
        domain: config.auth0Domain,
        clientID: config.clientID,
        redirectUri: config.callbackURL,
        responseType: 'code'
      }, config.internalOptions);
      const webAuth = new auth0.WebAuth(params);
      const databaseConnection = 'Username-Password-Authentication';
      const forgotPasswordPath = getDomainFromUrl(params.redirectUri);

      // --- 

      function login(e) {
        e.preventDefault();
        const form = document.getElementById("login-form");
        const username = form.elements["email"].value;
        const password = form.elements["password"].value;
        webAuth.login({
          realm: databaseConnection,
          username: username,
          password: password
        }, function (err) {
          if (err) displayError(err);
        });
      }

      hideInputsErrorMessage();
      setForgotPaswwordPath(forgotPasswordPath);

      submitButton.addEventListener('click', login);
    });

    document.addEventListener('DOMContentLoaded', function () {
      const currentUrl = window.location.href;
      const redirectUri = getQueryParam(currentUrl, 'redirect_uri');

      if (redirectUri) {
        const redirectDomain = getDomainFromUrl(redirectUri);

        if (redirectDomain && domainToEnvironment[redirectDomain]) {
          assignEnvironmentValue(redirectDomain);
        } else {
          document.querySelectorAll('.environment-container').style.display = 'none';
        }
      } else {
        document.querySelectorAll('.environment-container').style.display = 'none';
      }

      setFooterYear();
    });

    // --- 

    function focusInput(inputId) {
      document.getElementById(inputId).focus();
    }

    // --- 

    function setForgotPaswwordPath(path) {
      const passwordError = document.getElementById('forgot-password-path');

      const url = new URL(path);
      const params = new URLSearchParams(url.search);

      params.append("version", 'v2');
      passwordError.href = path + '/forgot_password' + '?' + params.toString();
    }

    // ERROR LOGIN MESSAGE 

    function displayError(err) {
      removeBlockedAccountErrorMessage();
      removeErrorMessage();
      const statusCode = err.statusCode;
      if (statusCode === 400) {
        addErrorMessage(errorMessages[statusCode]);
      } else if (statusCode === 401) {
        addErrorMessage(errorMessages[statusCode]);
      } else if (statusCode === 429) {
        addBlockedAccountErrorMessage(errorTimestampMessage, errorMessages[429]);
        startCountdown(1800);
      } else {
        addErrorMessage(errorMessages.other);
      }
    }

    function addErrorMessage(errorData) {
      const errorSpan = document.createElement("span");
      errorSpan.classList.add("error-message__span");
      errorSpan.innerHTML = errorData?.errorDescription ?? errorMessages?.other?.errorDescription;

      const errorContainer = document.getElementById("error-message-container");
      errorContainer.style.display = 'flex';
      setTimeout(() => {
        errorContainer.style.opacity = '1';
      }, 50);
      errorContainer.appendChild(errorSpan);
    }

    function removeErrorMessage() {
      const errorContainer = document.getElementById("error-message-container");
      errorContainer.style.removeProperty('opacity');
      errorContainer.style.removeProperty('display');
      errorContainer.textContent = '';
    }

    function addBlockedAccountErrorMessage(errorTemplate, errorData) {
      const errorCodeElement = document.createElement("div");
      errorCodeElement.classList.add("v2-login-general-container__status-code-error-message");

      errorCodeElement.innerHTML = errorTemplate(errorData);

      const errorContainer = document.getElementById("blocked-account-message-container");
      errorContainer.style.display = 'block';
      errorContainer.appendChild(errorCodeElement);
    }

    function removeBlockedAccountErrorMessage() {
      clearInterval(timerInterval);
      const errorContainer = document.getElementById("blocked-account-message-container");
      errorContainer.style.display = 'none';
      errorContainer.textContent = '';
    }

    // COUNTDOWN 

    function startCountdown(totalSeconds) {

      function updateCountdown() {

        const errorTimestamp = document.getElementById('status-code-error-timestamp');

        if (totalSeconds <= 0) {
          clearInterval(timerInterval);
          errorTimestamp.textContent = '00:00:00';
        }

        totalSeconds--;

        const hours = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;

        const formattedHours = String(hours).padStart(2, '0');
        const formattedMinutes = String(minutes).padStart(2, '0');
        const formattedSeconds = String(seconds).padStart(2, '0');

        errorTimestamp.textContent = `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
      }

      updateCountdown();
      timerInterval = setInterval(updateCountdown, 1000);
    }

    function padZero(num) {
      return (num < 10 ? "0" : "") + num;
    }

    // INPUTS UI ERROR 

    function hideInputsErrorMessage() {
      emailError.style.display = 'none';
    }

    function validateEmailUIFirstTime(event) {
      isEmailInputTouched = true;
      if (event.target.value === '') {
        setUIEmail(false, 'touched');
      } else {
        validateEmailUI(event);
      }
    }

    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    function setUIEmail(isValid, errorMessageType) {
      const typeMessage = emailErrorMessage[errorMessageType] ?? emailErrorMessage.invalid;
      emailError.textContent = isValid ? '' : typeMessage;
      emailError.style.display = isValid ? 'none' : '';

      emailInput.classList.remove(isValid ? 'input-invalid' : 'input-valid');
      emailInput.classList.add(isValid ? 'input-valid' : 'input-invalid');
    }

    function validateEmailUI(event) {
      const email = event.target.value;
      const isValid = isEmailInputTouched || email.length > 0 ? isValidEmail(email) : true;

      setUIEmail(isValid, 'invalid');
    }

    emailInput.addEventListener('blur', validateEmailUIFirstTime);
    emailInput.addEventListener('input', validateEmailUI);

    function getQueryParam(url, param) {
      try {
        const urlObj = new URL(url);
        const params = new URLSearchParams(urlObj.search);
        return params.get(param);
      } catch (error) {
        console.error('Invalid URL: ', error);
        return null;
      }
    }

    function assignEnvironmentValue(value) {
      try {
        const environment = domainToEnvironment[value];
        if (environment) {
          const spanList = document.querySelectorAll('.environment-container span');
          spanList.forEach(el => el.textContent = environment);

          const test2List = document.querySelectorAll('.environment-container');
          test2List.forEach(el => el.style.display = 'flex');
        }
      } catch (error) {
        console.error('Error while trying to display environment designating ', error)
      }
    }

    function getDomainFromUrl(url) {
      try {
        const urlObj = new URL(url);
        return urlObj.origin;
      } catch (error) {
        console.error('URL inválida:', error);
        return null;
      }
    }

    function setFooterYear() {
      const footerText = document.querySelector('.v2-login-general-container__footer-desktop');
      const currentYear = new Date().getFullYear();
      footerText.textContent = `© Kashio versión ${currentYear}`;
    }

  </script>



</body></html>