services:
  - type: web
    name: zcentral-proxy
    env: docker
    region: oregon # Cambia según tu región preferida
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: ./

    # Variables de entorno
    envVars:
      - key: LARAVEL_APP_URL
        value: http://tu-app-laravel.com:8000
        # IMPORTANTE: Cambia esto por la URL real de tu aplicación Laravel

      - key: PORT
        value: 8080

      - key: ALLOWED_PATHS
        value: ""
        # Vacío = permitir todas las rutas
        # Ejemplo para solo API: value: "^/api/.*"

      - key: BLOCKED_PATHS
        value: "^/\\.env|^/\\.git.*"
        # Rutas bloqueadas por seguridad

      - key: MAX_UPLOAD_SIZE
        value: 100
        # Tamaño máximo de archivos en MB

      - key: PROXY_TIMEOUT
        value: 60
        # Timeout en segundos

    # Health check
    healthCheckPath: /health

    # Auto-deploy desde Git
    autoDeploy: true
